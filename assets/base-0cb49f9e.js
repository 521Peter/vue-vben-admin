import{u as c,i as p}from"./mock-api-d87b85f1.js";import{P as h}from"./index-c8d55b3e.js";import{b3 as a,E as D,N as F,h as i,V as E,z as g,B as o}from"./antd-c4849d31.js";import{d as f,l as u,E as e,i as y,f as m,o as T,u as B}from"./vue-f962b0e4.js";import"./index.js";import"./useContentViewHeight-8b859986.js";import"./useWindowSizeFn-01ffbee2.js";import"./onMountedOrActivated-affa4888.js";function x(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!y(l)}const A=f({setup(){const{data:l,error:r,loading:n}=c(p);return()=>u(F,{title:"默认用法"},{default:()=>[u(a,null,{default:()=>[u(a.Paragraph,null,{default:()=>[u(a.Text,{type:"danger"},{default:()=>[e("useRequest ")]}),e("的第一个参数是一个异步函数，在组件初次加载时，会自动触发该函数执行。同时自动管理该异步函数的"),u(a.Text,{code:!0},{default:()=>[e("loading")]}),u(a.Text,{code:!0},{default:()=>[e("data")]}),u(a.Text,{code:!0},{default:()=>[e("error")]}),e("等状态。")]}),u(a.Text,{code:!0},{default:()=>["const { data, error, loading } = useRequest(imitateApi);"]})]}),u(D,{spinning:n.value},{default:()=>[u("div",{class:"mt-4"},[r.value?"failed to load":`Username: ${l.value}`])]})]})}}),P=f({setup(){const l=m(""),r=t=>{l.value=t},{loading:n,run:s}=c(p,{manual:!0,onSuccess:(t,d)=>{t&&(r(""),i.success(`The username was changed to "${d[0]}" !`))}});return()=>u(F,{title:"手动触发",class:"mt-2"},{default:()=>[u(a,null,{default:()=>[u(a.Paragraph,null,{default:()=>[e("如果设置了"),u(a.Text,{type:"danger"},{default:()=>[e(" options.manual = true ")]}),e("，则 useRequest 不会默认执行，需要通过"),u(a.Text,{type:"danger"},{default:()=>[e(" run ")]}),e("来触发执行。")]}),u(a.Text,{code:!0},{default:()=>["const { loading, run } = useRequest(imitateApi, { manual: true });"]})]}),u(E,{class:"mt-4"},{default:()=>[u(g,{value:l.value,"onUpdate:value":t=>l.value=t,placeholder:"Please enter username"},null),u(o,{type:"primary",disabled:n.value,onClick:()=>s(l.value)},{default:()=>[n.value?"Loading":"Edit"]})]})]})}}),k=f({setup(){const l=m(""),r=t=>{l.value=t},{loading:n,run:s}=c(p,{manual:!0,onBefore:t=>{i.info(`Start Request: ${t[0]}`)},onSuccess:(t,d)=>{t&&(r(""),i.success(`The username was changed to "${d[0]}" !`))},onError:t=>{i.error(t.message)},onFinally:()=>{i.info("Request finish")}});return()=>u(F,{title:"生命周期",class:"mt-2"},{default:()=>[u(a,null,{default:()=>[u(a.Paragraph,null,{default:()=>[u(a.Text,{type:"danger"},{default:()=>[e("useRequest ")]}),e("提供了以下几个生命周期配置项，供你在异步函数的不同阶段做一些处理。")]}),u(a.Paragraph,null,{default:()=>[u(a.Text,{code:!0},{default:()=>[e("onBefore")]}),e("请求之前触发")]}),u(a.Paragraph,null,{default:()=>[u(a.Text,{code:!0},{default:()=>[e("onSuccess")]}),e("请求成功触发")]}),u(a.Paragraph,null,{default:()=>[u(a.Text,{code:!0},{default:()=>[e("onError")]}),e("请求失败触发")]}),u(a.Paragraph,null,{default:()=>[u(a.Text,{code:!0},{default:()=>[e("onFinally")]}),e("请求完成触发")]})]}),u(E,null,{default:()=>[u(g,{value:l.value,"onUpdate:value":t=>l.value=t,placeholder:"Please enter username"},null),u(o,{type:"primary",disabled:n.value,onClick:()=>s(l.value,!0)},{default:()=>[n.value?"Loading":"Edit"]}),u(o,{danger:!0,disabled:n.value,onClick:()=>s(l.value,!1)},{default:()=>[n.value?"Loading":"Error Edit"]})]})]})}}),R=f({setup(){const{data:l,loading:r,run:n,refresh:s}=c(p,{manual:!0});T(()=>n("lutz"));const t=()=>{l.value=`${Date.now()}`};return()=>u(F,{title:"刷新（重复上一次请求）",class:"mt-2"},{default:()=>[u(a,null,{default:()=>[u(a.Paragraph,null,{default:()=>[u(a.Text,{type:"danger"},{default:()=>[e("useRequest ")]}),e("提供了"),u(a.Text,{type:"danger"},{default:()=>[e(" refresh ")]}),e("和"),u(a.Text,{type:"danger"},{default:()=>[e(" refreshAsync ")]}),e("方法，使我们可以使用上一次的参数，重新发起请求。")]})]}),u(D,{spinning:r.value},{default:()=>[u(E,null,{default:()=>[u("div",null,[e("Username: "),l.value]),u(o,{type:"primary",onClick:t},{default:()=>[e("Change data")]}),u(o,{onClick:s},{default:()=>[e("Refresh")]})]})]})]})}}),q=f({setup(){const l=m(""),r=d=>{l.value=d},{loading:n,run:s,cancel:t}=c(p,{manual:!0,onSuccess:(d,C)=>{d&&(r(""),i.success(`The username was changed to "${C[0]}" !`))}});return()=>u(F,{title:"取消响应",class:"mt-2"},{default:()=>[u(a,null,{default:()=>[u(a.Paragraph,null,{default:()=>[u(a.Text,{type:"danger"},{default:()=>[e(" useRequest ")]}),e("提供了"),u(a.Text,{type:"danger"},{default:()=>[e(" cancel ")]}),e("函数，用于忽略当前 promise 返回的数据和错误")]})]}),u(E,null,{default:()=>[u(g,{value:l.value,"onUpdate:value":d=>l.value=d,placeholder:"Please enter username"},null),u(o,{type:"primary",disabled:n.value,onClick:()=>s(l.value)},{default:()=>[e("Edit")]}),u(o,{type:"dashed",disabled:!n.value,onClick:t},{default:()=>[e("Cancel")]})]})]})}}),S=f({setup(){const l=m(""),{data:r,loading:n,run:s,params:t}=c(p,{defaultParams:["lutz"]}),d=()=>{s(l.value)};return()=>u(F,{title:"管理参数",class:"mt-2"},{default:()=>{var C;return[u(a,null,{default:()=>[u(a.Paragraph,null,{default:()=>[u(a.Text,{type:"danger"},{default:()=>[e(" useRequest ")]}),e("返回的"),u(a.Text,{type:"danger"},{default:()=>[e(" params ")]}),e("会记录当次调用"),u(a.Text,{type:"danger"},{default:()=>[e(" service ")]}),e("的参数数组。比如你触发了"),u(a.Text,{code:!0},{default:()=>[e("run(1, 2, 3)")]}),e(",则"),u(a.Text,{type:"danger"},{default:()=>[e(" params ")]}),e(" 等于"),u(a.Text,{code:!0},{default:()=>[e(" [1, 2, 3] ")]})]}),u(a.Paragraph,null,{default:()=>[e("如果我们设置了"),u(a.Text,{type:"danger"},{default:()=>[e(" options.manual = false ")]}),e("，则首次调用"),u(a.Text,{type:"danger"},{default:()=>[e(" service ")]}),e("的参数可以通过"),u(a.Text,{type:"danger"},{default:()=>[e(" options.defaultParams ")]}),e("来设置。")]})]}),u(E,null,{default:()=>[u(g,{value:l.value,"onUpdate:value":v=>l.value=v,placeholder:"Please enter username"},null),u(o,{disabled:n.value,onClick:d},{default:()=>[n.value?"Loading":"Edit"]})]}),u("div",null,[u("div",null,[e("UserId: "),(C=B(t))==null?void 0:C[0]]),u("div",null,[e("Username: "),B(r)])])]}})}}),V=f({setup(){return()=>u(h,null,{default:()=>[u(A,null,null),u(P,null,null),u(k,null,null),u(R,null,null),u(q,null,null),u(S,null,null)],headerContent:()=>u(a,null,{default:()=>[u(a.Link,{href:"https://ahooks.js.org/zh-CN/hooks/use-request/index",target:"_blank"},{default:()=>[e("ahooks")," "]}),e("useRequest 的 vue 版本，是一个强大的异步数据管理的 Hooks。"),u(a.Paragraph,null,{default:()=>[u("ul",null,[["自动请求/手动请求","轮询","防抖","节流","屏幕聚焦重新请求","错误重试","loading delay","SWR(stale-while-revalidate)","缓存"].map(l=>u("li",null,[u(a.Text,null,x(l)?l:{default:()=>[l]})]))])]})]})})}});export{V as default};
